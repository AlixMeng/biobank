#!/bin/bash

#set -o verbose

ARGS=4
E_BADARGS=85

if [ $# -ne $ARGS ]  # Correct number of arguments passed to script?
then
  echo "Usage: `basename $0` HOST USER PWD OUTFILE"
  exit $E_BADARGS
fi

MYSQL=/usr/bin/mysql
SED=/bin/sed
HOST=$1
USER=$2
PWD=$3
OUTPUT=$4
DBNAME=bbpdb
HEADER=""

echo "" > $OUTPUT

function mysqlCsv {
    #echo "parms: $*"
    $MYSQL $HEADER -h$HOST -u$USER -p$PWD -D$DBNAME -B -e "$*" | $SED 's/\t/\",\"/g;s/^/\"/;s/$/\"/;s/\n//g;s/\"NULL\"/null/g' >> $OUTPUT
    HEADER="-N"
}

PATIENT_NRS=(
174
193
282
305
396
513
520
566
568
586
617
648
1116
1119
1124
1171
1479
1481
1988
2305
2755
3827
5262
5920
6204
6241
7180
7181
7232
7521
194
227
488
585
1129
1679
2310
4
4
5
6
10
12
13
15
16
20
21
22
24
25
27
29
30
33
34
35
36
41
41
42
43
45
45
46
46
47
48
48
49
50
51
52
53
54
58
63
64
69
70
73
74
75
76
77
102
102
103
107
140
141
141
142
142
143
143
166
184
201
242
244
244
245
374
424
439
469
498
505
611
656
656
752
1167
1167
1201
1623
1666
1695
1934
1944
2011
2085
3212
3943
4308
4319
4320
4330
4348
4385
4390
4398
4401
4407
4407
4410
4970
4973
5392
5392
5622
5885
5991
6056
6116
6117
6117
6117
6119
6119
6165
6165
6165
6249
6249
6311
6312
6567
6568
6568
6643
6644
6663
6673
6699
6699
6702
6756
6759
6760
6760
6794
6795
6796
6797
6799
6799
6800
6888
6888
6888
6913
6914
6915
6915
6916
6917
6918
6925
6938
6940
6981
6982
6982
6983
6984
6984
7025
7028
7028
7029
7136
7137
7197
7198
7199
7201
7202
7203
7209
7216
7223
7224
7273
7339
7369
7376
7395
7455
7457
7497
7498
7658
7683
7691
8105
8106
8136
8136
8267
8288
8290
8291
8292
8293
8334
8587
8879
10046
233
275
678
837
6460
597
1428
4978
128
218
223
269
430
499
1403
1438
1608
2079
2514
3821
7115
8381
407
1086
101
886
1284
2532
317
321
323
359
446
451
485
535
556
557
609
625
626
725
1166
1237
1237
1244
1253
1253
1333
2028
6968
8006
8369
10032
740
970
1975
1375
1376
1434
1741
1989
5386
335
372
450
461
462
463
695
699
707
708
710
4011
5190
5832
8415
2248
375
375
719
2528
6136
6549
7368
8398
116
1573
1581
1584
1585
1676
2731
5864
6308
6495
6821
6822
8137
)

for patient_nr in "${PATIENT_NRS[@]}"
do
    mysqlCsv "select patient_nr, dec_chr_nr from patient where patient_nr='$patient_nr'"
done
